import"./style-SSo58T_l.js";import{f as r}from"./fetch-wtUFcH3C.js";function i(){localStorage.removeItem("token"),window.location.href="/login-page.html"}const a=async function(){const e=localStorage.getItem("token"),t=await fetch("https://hyteyksiloprojekti.northeurope.cloudapp.azure.com/api/entries",{headers:{Authorization:"Bearer "+e}});if(!t.ok)throw new Error("Failed to fetch entries");return t.json()};document.getElementById("diaryForm").addEventListener("submit",async function(e){e.preventDefault();const t=new FormData(this),n={date:t.get("date"),mood:t.get("mood"),weight:t.get("weight"),sleep:t.get("sleep"),exerciseDuration:t.get("exerciseDuration"),exerciseIntensity:t.get("exerciseIntensity"),content:t.get("content")};try{(await fetch("https://hyteyksiloprojekti.northeurope.cloudapp.azure.com/api/diary",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")},body:JSON.stringify(n)})).ok?alert("Päiväkirjamerkintä tallennettu onnistuneesti!"):alert("Virhe tallennettaessa päiväkirjamerkintää.")}catch(o){console.error("Virhe:",o),alert("Jotain meni pieleen. Yritä uudelleen myöhemmin.")}});document.getElementById("logoutButton").addEventListener("click",function(e){e.preventDefault(),i()});async function s(){console.log("Hei täällä ollaan! Nyt pitäisi hakea käyttäjän tiedot");const e="https://hyteyksiloprojekti.northeurope.cloudapp.azure.com/api/auth/me",n={method:"GET",headers:{Authorization:"Bearer: "+localStorage.getItem("token")}};r(e,n).then(o=>{console.log(o),document.getElementById("name").innerHTML=o.user.username})}async function c(){try{const e=await a();console.log(e)}catch(e){console.error("Error fetching entries:",e)}}s();c();
