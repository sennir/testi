import"./style-rfZJKnZa.js";import{f as m}from"./fetch-wtUFcH3C.js";document.addEventListener("DOMContentLoaded",()=>{const n=document.querySelector(".loginuser"),o=document.querySelector("input[name=username]"),a=document.querySelector("input[name=password]");o.addEventListener("input",s),a.addEventListener("input",s);function s(){const r=o.value.trim(),t=a.value.trim();r!==""&&t!==""?n.disabled=!1:n.disabled=!0}n.addEventListener("click",async r=>{r.preventDefault(),console.log("Nyt logataan sisään");const t=o.value.trim(),i=a.value.trim();if(t===""||i===""){alert("Täytä kaikki kentät ennen kirjautumista.");return}const l="https://hyteyksiloprojekti.northeurope.cloudapp.azure.com//api/auth/login";document.querySelector(".login_form");const u={username:t,password:i},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)};console.log(u);try{const e=await m(l,c);console.log("Tämä on responsedata:",e),e.token?(localStorage.setItem("token",e.token),alert("Sisään kirjautuminen onnistui. Siirryt eteenpäin kun painat ok."),setTimeout(function(){window.location.href="main-page.html"},500)):alert("Väärä käyttäjänimi tai salasana!")}catch(e){console.error(e),alert("Error. Yritä myöhemmin uudestaan.")}})});
